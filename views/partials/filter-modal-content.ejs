<div class="fixed right-0 top-0 h-full w-full max-w-md bg-white shadow-xl transform transition-transform duration-300 translate-x-full">
  <div class="p-6 h-full flex flex-col">
    <div class="flex justify-between items-center mb-6">
      <h3 class="text-lg font-medium">Filter & Sort</h3>
      <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700">
        <i class="fas fa-times"></i>
      </button>
    </div>

    <div class="flex-grow overflow-y-auto">
      <form id="filterForm" action="/shopall" method="GET" class="space-y-6">
        <% if (search) { %>
          <input type="hidden" name="search" value="<%= search %>">
        <% } %>

        <!-- Category Filter -->
        <div>
          <h4 class="text-sm font-medium mb-3">Category</h4>
          <select 
            id="categorySelect"
            name="category" 
            class="w-full border border-gray-300 rounded-md p-2 text-sm"
          >
            <option value="">All Categories</option>
            <% categories.forEach(category => { %>
              <option 
                value="<%= category._id %>" 
                <%= selectedCategory === category._id.toString() ? 'selected' : '' %>
              >
                <%= category.name %>
              </option>
            <% }); %>
          </select>
        </div>

        <!-- Subcategory Filter -->
        <div id="subcategoryContainer">
          <h4 class="text-sm font-medium mb-3">Subcategory</h4>
          <select 
            id="subcategory"
            name="subcategory" 
            class="w-full border border-gray-300 rounded-md p-2 text-sm <%= subcategories.length ? '' : 'opacity-50' %>"
            <%= subcategories.length ? '' : 'disabled' %>
          >
            <option value="">All Subcategories</option>
            <% subcategories.forEach(subcategory => { %>
              <option value="<%= subcategory %>"><%= subcategory %></option>
            <% }); %>
          </select>
        </div>

        <!-- Rest of your filter form -->
        <!-- ... -->

        <div class="flex justify-end space-x-3 pt-4">
          <button 
            type="button" 
            onclick="closeModal()" 
            class="px-4 py-2 border border-gray-300 rounded-md text-sm"
          >
            Cancel
          </button>
          <button 
            type="submit" 
            class="px-4 py-2 bg-blue-600 text-white rounded-md text-sm"
          >
            Apply Filters
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
